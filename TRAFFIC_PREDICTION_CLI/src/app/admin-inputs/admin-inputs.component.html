<p class="fixed-top">
    <mat-toolbar>
        <button mat-icon-button  
            class="example-icon" 
            data-bs-toggle="offcanvas" 
            data-bs-target="#offcanvasExample" 
            aria-controls="offcanvasExample" 
            aria-label="Example icon-button with menu icon"
        >
            <mat-icon>menu</mat-icon>
        </button>
        <mat-menu #menu="matMenu">
            <button mat-menu-item (click)="navigateToTraining()">Training</button>
            <button mat-menu-item (click)="navigateToPredictions()">Predictions</button>
            <button mat-menu-item>Provide Junction Properties</button>
        </mat-menu>
        <span>Traffic Intensity Prediction and Recommendation</span>
        <span class="example-spacer"></span>
    </mat-toolbar>
</p>

<br /><br /><br /><br />

<div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasExample" aria-labelledby="offcanvasExampleLabel">
    <div class="offcanvas-header">
        <h1 style="margin-left: 125px" class="offcanvas-title" id="offcanvasExampleLabel">Menu</h1>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <mat-divider></mat-divider>
    <div class="offcanvas-body">
        <mat-list>
            <mat-list-item (click)="navigateToTraining()">Training</mat-list-item>
            <mat-divider></mat-divider>
            <mat-list-item (click)="navigateToPredictions()">Predictions</mat-list-item>
            <mat-divider></mat-divider>
            <mat-list-item>Provide Junction Properties</mat-list-item>
        </mat-list>
    </div>
</div>



<div id="maincontainer" class="container p-5 my-5 bg-primary shadow-lg p-3 mb-5 bg-white rounded">
    <section>
        <h1>Junction Properties</h1>
        <hr />
        <div>
            <button style="margin-left:10px" mat-raised-button color="primary" data-bs-toggle="modal" data-bs-target="#exampleModal2">
                Add Record
            </button>
            <br />
            <br />
            <table class="table" aria-describedby="table2-desc">
                <thead>
                    <tr>
                        <th scope="col">Junction</th>
                        <th scope="col">District</th>
                        <th scope="col">Roadway Width</th>
                        <th scope="col">Maximum Capacity</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let record of allJunctionsInformation">
                        <th scope="row">{{ record.junctionName }}</th>
                        <td>{{ record.district }}</td>
                        <td>{{ record.roadwayWidth }}</td>
                        <td>{{ record.maxVehicles }}</td>
                        <td style="width: 50px;">
                            <button mat-icon-button color="primary" (click)="editRecord(record)" data-bs-toggle="modal" data-bs-target="#exampleModal">
                                <mat-icon>edit</mat-icon>
                            </button>
                        </td>
                        <td style="width: 50px;">
                            <button mat-icon-button color="warn" (click)="delete(record)">
                                <mat-icon>delete</mat-icon>
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>



            <div class="modal fade modal-lg" id="exampleModal2" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h1 class="modal-title fs-5" id="exampleModalLabel">Add Record</h1>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <div class="container text-center">
                                <div class="row">
                                    <div class="col">
                                        <mat-form-field appearance="outline">
                                            <mat-label>Enter Junction Name</mat-label>
                                            <input [(ngModel)]="newJunctionName" type="text" matInput placeholder="Enter Junction Name">
                                        </mat-form-field>
                                    </div>
                                    <div class="col">
                                        <div class="form-floating">
                                            <select id="floatingSelect" class="form-select" [(ngModel)]="newDistrict" aria-label="Default select example">
                                                <option value="{{district}}" *ngFor="let district of allDistricts">{{district}}</option>
                                            </select>
                                            <label for="floatingSelect">Enter District</label>
                                        </div>
                                    </div>
                                    <div class="col">
                                        <div style="width: 250px" class="form-floating">
                                            <select id="floatingSelect" class="form-select" [(ngModel)]="newRoadwayWidth" aria-label="Default select example">
                                                <option value="{{roadwayWidth}}" *ngFor="let roadwayWidth of allRoadwayWidths">{{roadwayWidth}} metres</option>
                                            </select>
                                            <label for="floatingSelect">Enter Roadway Width</label>
                                        </div>
                                    </div>
                                    <div class="col">
                                        <mat-form-field appearance="outline">
                                            <mat-label>Enter Maximum Vehicles Capacity</mat-label>
                                            <input [(ngModel)]="newMaxVehicles" type="number" matInput placeholder="Enter Maximum Vehicles Capacity">
                                        </mat-form-field>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button mat-raised-button color="warn" data-bs-dismiss="modal">Close</button>
                            <button mat-raised-button color="primary" (click)="addRecord()">Save</button>
                        </div>
                    </div>
                </div>
            </div>



            <!-- Modal -->
            <div class="modal fade modal-lg" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h1 class="modal-title fs-5" id="exampleModalLabel">Edit <strong>{{recordToBeEdited.junctionName}}'s</strong> information</h1>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <table class="table" aria-describedby="table2-desc">
                                <thead>
                                    <tr>
                                        <td></td>
                                        <th scope="col"><h3 style="font-weight: bold;">Old Information</h3></th>
                                        <th scope="col"><h3 style="font-weight: bold;">New Information</h3></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <th scope="row"><h3 style="font-weight: bold;">District</h3></th>
                                        <td><h3>{{ recordToBeEdited.district }}</h3></td>
                                        <td>
                                            <select class="form-select" [(ngModel)]="updatedDistrict" aria-label="Default select example">
                                                <option value="{{district}}" *ngFor="let district of allDistricts">{{district}}</option>
                                            </select>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th scope="row"><h3 style="font-weight: bold;">Roadway Width</h3></th>
                                        <td><h3>{{ recordToBeEdited.roadwayWidth }}</h3></td>
                                        <td>
                                            <select class="form-select" [(ngModel)]="updatedRoadwayWidth" aria-label="Default select example">
                                                <option value="{{roadwayWidth}}" *ngFor="let roadwayWidth of allRoadwayWidths">{{roadwayWidth}} metres</option>
                                            </select>
                                        </td>
                                    </tr>
                                    <tr>
                                        <th scope="row"><h3 style="font-weight: bold;">Maximum Vehicles Capacity</h3></th>
                                        <td><h3>{{ recordToBeEdited.maxVehicles }}</h3></td>
                                        <td>
                                            <mat-form-field style="width:395px" appearance="outline">
                                                <mat-label>Max Vehicles Capacity</mat-label>
                                                <input [(ngModel)]="updatedMaxVehicles" type="number" matInput placeholder="Enter Maximum Vehicles Capacity">
                                            </mat-form-field>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="modal-footer">
                            <button mat-raised-button color="warn" data-bs-dismiss="modal">Close</button>
                            <button mat-raised-button color="primary" (click)="update()">Save</button>
                        </div>
                    </div>
                </div>
            </div>




        </div>
    </section>
</div>