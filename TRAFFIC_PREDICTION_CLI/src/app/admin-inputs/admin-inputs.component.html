<p>
    <mat-toolbar>
        <button mat-icon-button  
            class="example-icon" 
            data-bs-toggle="offcanvas" 
            data-bs-target="#offcanvasExample" 
            aria-controls="offcanvasExample" 
            aria-label="Example icon-button with menu icon"
        >
            <mat-icon>menu</mat-icon>
        </button>
        <mat-menu #menu="matMenu">
            <button mat-menu-item (click)="navigateToTraining()">Training</button>
            <button mat-menu-item (click)="navigateToPredictions()">Predictions</button>
            <button mat-menu-item>Provide Junction Properties</button>
        </mat-menu>
        <span>Traffic Intensity Prediction and Recommendation</span>
        <span class="example-spacer"></span>
    </mat-toolbar>
</p>


<div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasExample" aria-labelledby="offcanvasExampleLabel">
    <div class="offcanvas-header">
        <h1 style="margin-left: 125px" class="offcanvas-title" id="offcanvasExampleLabel">Menu</h1>
        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <mat-divider></mat-divider>
    <div class="offcanvas-body">
        <mat-list>
            <mat-list-item (click)="navigateToTraining()">Training</mat-list-item>
            <mat-divider></mat-divider>
            <mat-list-item (click)="navigateToPredictions()">Predictions</mat-list-item>
            <mat-divider></mat-divider>
            <mat-list-item>Provide Junction Properties</mat-list-item>
        </mat-list>
    </div>
</div>



<div id="maincontainer" class="container p-5 my-5 bg-primary shadow-lg p-3 mb-5 bg-white rounded">
    <section>
        <h1>Junction Properties</h1>
        <hr id="hrTag" />
        <label for="myfile">Browse dataset: </label>
        <br /> <!-- Input File of type csv -->
        <input type="file" accept=".csv" id="myfile" name="myfile" class="file-upload" [(ngModel)]="dataset" (change)="fileChangeListener($event)" required>
        <br />
        <p style="color:red">Only .csv, .xlsx and .data files allowed</p>
        <div style="width:500px" id="errorAlert" *ngIf="toggleErrorString4" class="alert alert-danger" role="alert">
            {{ errorString4 }}
        </div>
        <mat-divider></mat-divider>
        <mat-tab-group>
            <mat-tab label="District">
                <br />
                <div>
                    <h3>For <strong>{{currentJunctionForDistrict}}</strong></h3>
                    <form class="example-form">

                        <table class="table">
                            <thead>
                                <tr>
                                    <th scope="col">Junction name</th>
                                    <th scope="col">District name</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let junction of junctions">
                                    <th scope="row">{{ junction }}</th>
                                    <td>
                                        
                                        <mat-form-field appearance="fill" style="width: 500px;">
                                            <mat-label>Enter District Name</mat-label>
                                            <mat-select #districtInput (selectionChange)="trackDistrict(junction.toString(), districtInput.value)" name="districtInput">
                                                <mat-option *ngFor="let district of districtList" [value]="district">
                                                    {{ district }}
                                                </mat-option>
                                            </mat-select>
                                        </mat-form-field>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </form>
                    <br />
                    <button mat-raised-button color="primary" *ngIf="saveJunctionDistrictButton" (click)="saveJunctionDistrictMaps()">Save</button>
                </div>
                <br />
                <br />
                <div style="width:500px" id="errorAlert" *ngIf="toggleErrorString" class="alert alert-danger" role="alert">
                    {{ errorString }}
                </div>
            </mat-tab>



            <mat-tab label="Roadway width">
                <br />
                <br />
                <div>
                    <h3>For <strong>Junction {{currentJunctionForRoadwayWidth}}</strong></h3>
                    <form class="example-form">

                        <table class="table">
                            <thead>
                                <tr>
                                    <th scope="col">Junction name</th>
                                    <th scope="col">Roadway Width</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let junction of junctions">
                                    <th scope="row">{{ junction }}</th>
                                    <td>
                                        
                                        <mat-form-field appearance="fill" style="width: 500px;">
                                            <mat-label>Enter Roadway Width</mat-label>
                                            <mat-select #roadwayWidthInput (selectionChange)="trackRoadwayWidth(junction.toString(), roadwayWidthInput.value)" name="roadwayWidthInput">
                                                <mat-option *ngFor="let roadwayWidth of roadwayWidthList" [value]="roadwayWidth">
                                                    {{roadwayWidth}} m(metres)
                                                </mat-option>
                                            </mat-select>
                                        </mat-form-field>

                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </form>
                    <br />
                    <button mat-raised-button color="primary" *ngIf="saveJunctionRoadwayWidthButton" (click)="saveJunctionRoadwayWidthMaps()">Save</button>
                </div>
                <!-- Display error message when validation suggests errors -->
                <br />
                <div style="width:500px" id="errorAlert" *ngIf="toggleErrorString2" class="alert alert-danger" role="alert">
                    {{ errorString2 }}
                </div>
            </mat-tab>




            <mat-tab label="Maximum Vehicles">
                <br />
                <br />
                <div>
                    <h3>For <strong>Junction {{currentJunctionForMaxVehicles}}</strong></h3>
                    <form class="example-form">

                        <table class="table">
                            <thead>
                                <tr>
                                    <th scope="col">Roadway Width</th>
                                    <th scope="col">Maximum Amount of Vehicles</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr *ngFor="let roadwayWidth of roadwayWidthList">
                                    <th scope="row">{{ roadwayWidth }} m (metres)</th>
                                    <td>
                                        
                                        <mat-form-field appearance="outline" class="example-full-width" style="width: 500px;">
                                            <mat-label>Enter maximum amount of vehicles</mat-label>
                                            <input #maxVehiclesInput (change)="trackMaxVehicles(roadwayWidth, maxVehiclesInput.value)" matInput name="maxVehiclesInput" placeholder="Capacity of roadway width of {{roadwayWidth}} metres" type="number">
                                        </mat-form-field>

                                    </td>
                                </tr>
                            </tbody>
                        </table>

                    </form>
                    <br />
                    <button mat-raised-button color="primary" (click)="saveRoadwayWidthMaxVehiclesMaps()">Save</button>
                </div>
                <!-- Display error message when validation suggests errors -->
                <br />
                <div style="width:500px" id="errorAlert" *ngIf="toggleErrorString3" class="alert alert-danger" role="alert">
                    {{ errorString3 }}
                </div>
            </mat-tab>
        </mat-tab-group>
        <mat-divider></mat-divider>
        <br />

        <div class="text-center">
            <button mat-raised-button color="primary" *ngIf="showSubmitButton" (click)="submitToTraining()">Continue to Training</button>
        </div>
    </section>
</div>